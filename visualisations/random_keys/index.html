<!DOCTYPE html>
<html>

<head>
    <title>WebSocket demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <style type="text/css">
        body {
            font-family: "Courier New", sans-serif;
            font-size: x-large;
            text-align: center;
            color: black;
            background: #00ff00;
        }
    </style>
</head>

<body>
    <div class="state">

    </div>

    <script>
        var websocket = new WebSocket("ws://127.0.0.1:6789/");
        var state = $('.state');
        websocket.onmessage = function (event) {
            data = event.data;
            flash(data);
        };
        websocket.onopen = function (event) {
            websocket.send("test");
        };

        function flash(data) {
            var new_data = document.createElement("div");
            new_data.innerHTML = data;
            state.append(new_data)
            $(new_data).delay(6000).fadeOut(200);
        }
    </script>
</body>

</html>
